'\"macro stdmacro
.if n .pH g1a.idmkinit @(#)idmkinit	40.8 of 1/3/91
.\" Copyright 1991 UNIX System Laboratories, Inc.
.\" Copyright 1989, 1990 AT&T
'\"macro stdmacro
.if n .pH g1.idmkinit @(#)idmkinit	30.3 of 3/5/86
.\" Copyright 1991 UNIX System Laboratories, Inc.
.if \nX=0 .ds x} idmkinit 1M "Base System" "\&"
.if \nX=1 .ds x} idmkinit 1M "Base System"
.if \nX=2 .ds x} idmkinit 1M "" "\&"
.if \nX=3 .ds x} idmkinit "" "" "\&"
.nr X
.TH \*(x} "" "386 Computer Only"
.SH NAME
\f4idmkinit\f1 \- reads files containing specifications
.SH SYNOPSIS
\f4/etc/conf/bin/idmkinit\f1
.SH "DESCRIPTION"
This command reads the files containing specifications of
\f4/etc/inittab\f1
entries from
\f4/etc/conf/init.d\f1
and constructs a new
\f4inittab\f1
file in
\f4/etc/conf/cf.d\f1 .
It returns 0 on success and a positive number on error.
.P
The files in
\f4/etc/conf/init.d\f1
are copies of the Init modules in device Driver Software Packages (DSP).
There is at most one Init file per DSP.
Each file contains one line for each
\f4inittab\f1
entry to be installed.
There may be multiple lines (i.e., multiple
\f4inittab\f1
entries) per file.
An
\f4inittab\f1
entry has the form (the \f2id\f1 field is often called the \f2tag\f1):
.P
.RS
\f2id:rstate:action:process\f1
.RE
.P
The Init module entry must have one of the following forms:
.P
.RS
.nf
\f2action:process\f1
.sp .4v
\f2rstate:action:process\f1
.sp .4v
\f2id:rstate:action:process\f1
.fi
.RE
.P
When
\f4idmkinit\f1
encounters an entry of the first type, a valid
.I id
field will be generated, and an
.I rstate
field of 2 (indicating run on init state\ 2) will be generated.
When an entry of the second type is encountered only the
.I id
field is prepended.
An entry of the third type is incorporated into
the new \f4inittab\f1 unchanged.
.PP
Since add-on \f4inittab\f1 entries specify
init state\ 2 for their \f2rstate\f1 field most often,
an entry of the first type should almost always be used.
An entry of the second type may be specified
if you need to specify other than state\ 2.
DSP's should avoid specifying the
.I id
field as in the third entry,
since other add-on applications or DSPs may have already used
the \f2id\f1 value you have chosen.
The \f4/etc/init\f1 program will encounter serious
errors if one or more \f4inittab\f1 entries
contain the same \f2id\f1 field.
.PP
\f4idmkinit\f1 determines which of the three forms above
is being used for the entry
by requiring each entry to have a valid \f3action\f1 keyword.
Valid \f3action\f1 values are as follows:
.PP
.RS
.nf
\f4off\f1
\f4respawn\f1
\f4ondemand\f1
\f4once\f1
\f4wait\f1
\f4boot\f1
\f4bootwait\f1
\f4powerfail\f1
\f4powerwait\f1
\f4initdefault\f1
\f4sysinit\f1
.fi
.RE
.PP
The
\f4idmkinit\f1
command is called automatically upon entering init State\ 2
on the next system reboot after a kernel reconfiguration
to establish the correct
\f4/etc/inittab\f1
for the running
\f4/unix\f1
kernel.
\f4idmkinit\f1
can be called as a user level command to test modification of
\f4inittab\f1
before a DSP is actually built.
It is also useful in installation scripts
that do not reconfigure the kernel, but need to create
\f4inittab\f1
entries.
In this case, the
\f4inittab\f1
generated by
\f4idmkinit\f1
must be copied to
\f4/etc/inittab\f1 ,
and a
\f4telinit\ q\f1
command must be run to make the new entry take affect.
.P
The command line options are:
.TP "\w'\-o\ directory\ \ \ 'u"
\f4\-o\f1  \f2directory\f1
\f4inittab\f1
will be created in the directory specified rather than
\f4/etc/conf/cf.d\f1 .
.TP
\f4\-i\f1  \f2directory\f1 
The ID file
\f4init.base\f1,
which normally resides in
\f4/etc/conf/cf.d\f1,
can be found in the directory specified.
.TP
\f4\-e\f1  \f2directory\f1
The Init modules that are usually in
\f4/etc/conf/init.d\f1
can be found in the directory specified.
.TP
\f4\-#\f1
Print debugging information.
.SH "ERROR MESSAGES"
An exit value of zero indicates success.
If an error was encountered,
\f4idmkinit\f1
will exit with a non-zero value and report an error message.
All error messages are designed to be self-explanatory.
.SH "SEE ALSO"
\f4idbuild\f1(1),
\f4idinstall\f1(1m),
\f4idmknod\f1(1m),
\f4init\f1(1m).
.PP
\f4inittab\f1(4)
in the \f2Programmer's Reference Manual\f1.
