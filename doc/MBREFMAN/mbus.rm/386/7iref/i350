'\"macro stdmacro
.if n .pH g1a.i350 @(#)i350	40.4 of 5/17/91
.\" Copyright 1991 UNIX System Laboratories, Inc.
.\" Copyright 1989, 1990 AT&T
.nr X
.if \nX=0 .ds x} i350 7iref "" "" "\&"
.if \nX=1 .ds x} i350 7iref "" ""
.if \nX=2 .ds x} i350 7iref "" "\&"
.if \nX=3 .ds x} i350 "" "" "\&"
.TH \*(x}
.SH NAME 
\f4i350\f1 \- iSBX 350 parallel printer driver 
.SH DESCRIPTION 
The \f4i350\f1 driver provides an \f4lpadmin\fP interface to the parallel printer port of 
an iSBX 350 module on an iSBC 386/1xx cpu board (such as an iSBC 386/116 or an 
iSBC 386/120 board) or an iSBC 486/1xx cpu board (such as an iSBC 486/125 
board).  This driver supports only one iSBX 350 module.
\f4ioctl\fP control of the iSBX 350 module is also provided.
Refer to \f4termio\fP(7) in the \f2System Administrator's Reference Manual\fP.  
.P
The iSBX 350 driver is configured by the structure \f4lp_cfg\fP defined in the 
\f4lp_i350.h\fP file as follows: 
.P
.RS
.ft 4
.nf
struct lp_cfg {
 	int	p_level;
 	int	p_porta;
 	int	p_portb;
 	int	p_portc;
 	int	control;
}; 
.fi
.RE
.P
This driver uses minor number 4.  The minor number is passed to the \f4iasy\f1
driver at boot time.
.P
The fields are defined as follows: 
.TP .75i
\f2p_level\fP
Specifies the interrupt level for the system. 
.TP
\f2p_porta\fP
Specifies the address (in I/O space) of the printer data out port. 
.TP
\f2p_portb\fP
Not used. 
.TP
\f2p_portc\fP
Specifies the strobe and interrupt lines for the printer in the low 
nibble.  The high nibble is used for incoming printer status. 
.TP
\f2control\fP
Used for the 8255 Programmable Peripheral Interface chip controls. 
.P
This driver works with the following printers: 
.P
.RS
.nf
Serial and Parallel Printers:
	C. Itoh 300Q, 800 
	HP Laserjet 
	Okidata Micro 82A 
	Silver-Reed 800, 770 
.sp
Serial Printers:
	C. Itoh F10-55, 4000-10, 3500-10, 400Q 
	Smith-Corona D300 
.sp
.bp
Parallel Printers :
	C. Itoh 4000-20, 3500-20 
	Epson FX286 
	Mannesman Tally 440 
	Okidata Micro 84 
	Toshiba P341 
.RE
.br
.ne 1i
.P
Use \f4/dev/lp\f1 to access the printer.
.SS "Jumpering Information"
On the iSBX 350 multimodule, wire wrap E13 to E16.  This causes MINTR1 to 
indicate any interrupts generated by the module.  
.P
If you are using an iSBC 386/116 or iSBC 386/120 board, jumper E11 to E2 on the 
iSBX 350 module.
.P
Refer to the \f2iSBX\*(Tm 350 Hardware Reference Manual\f1 for more information.
.SS "sdevice File Changes"
Before using this driver, you must enable it and set the interrupt vector.  Do
this by performing the following steps:
.TP
1.
Edit the file \f4/etc/conf/sdevice.d/i350\f1.
.TP
2.
Find the entry that starts with \f4i350\f1.
.TP
3.
Enable the driver by changing the second field from an \f4N\f1 to a \f4Y\f1.
.TP
4.
Set the interrupt vector in the sixth field.  For the iSBC 486/133SE board 
and iSBC 386/1xx boards, the interrupt vector is 9.  For the iSBC 386/133 and
iSBC 486/125 boards, the interrupt vector is 2.
.TP
5.
Rebuild the kernel by entering \f4/etc/conf/bin/idbuild\f1.
.TP
6.
Shutdown and reboot the system.
.SH FILES 
.TP 2.25i
\f4/etc/conf/pack.d/i350/space.c\f1
Driver specific configuration.
.TP
\f4/etc/conf/sdevice.d/i350\f1
System configuration file.
.TP
\f4/usr/include/sys/lp_i350.h\f1
Driver specific definitions.
.SH DIAGNOSTICS 
One of the following two messages is issued at device initialization time: 
.P
.RS
.nf
.ft 4
Parallel port (at n) level n found. 
.ft 1
.fi
.sp .5
or 
.sp .5
.nf
.ft 4
Parallel port (at n) level n NOT found. 
.ft 1
.fi
.RE
.P
Possible error messages include: 
.P
.RS
.ft 4
lp: Unexpected interrupt (level n)
lpintr(): ACK low for too long.. 
.ft 1
.RE
.SH SEE ALSO 
\f4termio\f1(7),
\f4iasy\f1(7iref) 
.P
Depending on which 386/1xx or 486/1xx board you have, see the appropriate 
manual for jumpering information:
.P
.nf
\f2iSBC\*R 386/100 Single Board Computer User's Guide\fP,
\f2iSBC\*R 386/116 and 386/120 Single Board Computer User's Guide\fP,
\f2iSBC\*R 386/133 Single Board Computer User's Guide\fP,
\f2iSBC\*R 486/133SE Single Board Computer User's Guide\fP.
.fi
.SH NOTES 
Interrupting the printer power or disconnecting the cable to the printer while 
jobs are being printed could result in a loss of print capabilities.  This 
won't affect the system, but you may need to reboot to allow the printer to 
accept further commands.
